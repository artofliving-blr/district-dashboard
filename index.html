<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AOL District Dashboard</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <style>
    .card { transition: 0.3s; cursor: pointer; border-radius: 12px; }
    .card:hover { transform: translateY(-5px); box-shadow: 0 12px 24px rgba(0,0,0,0.2) !important; }
    
    /* Ensure horizontal rules inside colored cards look clean */
    .bg-success hr, .bg-danger hr { border-top: 1px solid rgba(255,255,255,0.3); }
    .bg-warning hr { border-top: 1px solid rgba(0,0,0,0.1); }
    .logo {
            width: 150px;
            display: block;
            margin: 27px auto 7px auto;
        }
    .btn-outline-secondary, .btn-outline-success {
        border-radius: 50%;
        width: 32px;
        height: 32px;
        padding: 0;
        line-height: 30px;
        text-align: center;
        font-size: 14px;
    }
    /* NEW: Mini Pie Chart Styles */
    .pie-chart-container {
        background: rgba(255,255,255,0.1); /* Slight background for contrast */
        border-radius: 8px;
        padding: 10px;
        margin-top: 15px;
    }
    .pie-chart {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 2px solid rgba(255,255,255,0.5);
        /* The actual pie slices will be set via inline styles in JS */
    }
    .chart-legend { font-size: 0.75rem; line-height: 1.3; }
</style>
</head>
<body>
    <img src="Art-of-Living_Logo.png" alt="Art of Living Logo" class="logo">
    <div class="container py-5">
    <div class="text-center mb-5">
        <h1 class="display-4 font-weight-bold">Karnataka District Activity Tracker</h1>
        <h3 class="text-secondary mb-3">(Jan 15, 2026 to May 31, 2026)</h3>
        <p id="last-updated-text" class="text-muted font-italic mb-3">Loading timestamp...</p>
        <p class="lead">Click on a district to view course timelines and registration links.</p>
        <div class="d-flex flex-column align-items-center mb-4">
            <div class="btn-group shadow-sm mb-3" role="group">
                <button type="button" class="btn btn-primary" id="btn-all" onclick="setFilter('all')">All Programs</button>
                <button type="button" class="btn btn-outline-primary" id="btn-entry" onclick="setFilter('entry')">Entry Level Only</button>
            </div>
            
            <div class="custom-control custom-checkbox custom-control-inline">
                <input type="checkbox" class="custom-control-input" id="sortTopCheck" onchange="toggleSort()">
                <label class="custom-control-label font-weight-bold" for="sortTopCheck" style="cursor:pointer">
                    Sort by Top Performing Districts
                </label>
            </div>
        </div>
    </div>
    
    <div class="row" id="dashboard-container"></div>

    <div id="detail-view" class="mt-5 card shadow p-4" style="display:none;">
        <h3 id="detail-title" class="mb-4"></h3>
        <div class="table-responsive">
            <table class="table table-bordered">
                <thead class="thead-dark">
                    <tr>
                        <th>Status</th>
                        <th>Course</th>
                        <th>Pax</th>
                        <th>Teachers</th>
                        <th>Starts On</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="detail-table-body"></tbody>
            </table>
        </div>
    </div>
</div>
    <script src="app.js"></script>
</body>
</html>